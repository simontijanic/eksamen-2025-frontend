<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dokumentasjon - Joke Review</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>
  <!-- Beautiful Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4 shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">
        Vote-a-joke
      </a>
      <div class="d-flex">
        <a href="documentation.html" class="btn btn-outline-light ms-2">Dokumentasjon</a>
      </div>
    </div>
  </nav>

    <div class="container py-4">
        <header class="pb-3 mb-4 border-bottom">
            <a href="index.html" class="d-flex align-items-center text-dark text-decoration-none">
                <span class="fs-4">Tilbake til forsiden</span>
            </a>
        </header>

        <h1 class="text-center mb-4">Dokumentasjon og Brukerveiledning</h1>

        <section id="brukerveiledning" class="mb-5">
            <h2>Brukerveiledning - Joke Review</h2>
            <p>Velkommen! Her kan du lese en tilfeldig vits, gi stjerner (1-5) og skrive en kommentar. Etter at du har sendt inn anmeldelsen, får du se gjennomsnittlig vurdering for akkurat denne vitsen, og kan hente en ny vits.</p>

            <h3>Slik gjør du</h3>
            <ol>
                <li><strong>Se vitsen:</strong> På forsiden vises en tilfeldig vits (setup og punchline).</li>
                <li><strong>Gi stjerner:</strong> Klikk på stjernene for å velge hvor morsom du synes vitsen er (1-5).</li>
                <li><strong>Skriv kommentar (valgfritt):</strong> Skriv gjerne en kommentar om vitsen.</li>
                <li><strong>Send anmeldelse:</strong> Klikk på "Send anmeldelse". Du får se ny gjennomsnittlig vurdering for denne vitsen.</li>
                <li><strong>Ny vits:</strong> Klikk på "Ny vits" for å hente en ny tilfeldig vits og anmelde den.</li>
            </ol>
        </section>

        <section id="faq" class="mb-5">
            <h2>Ofte stilte spørsmål (FAQ)</h2>
            <ul>
                <li><strong>Q: Kan jeg anmelde samme vits flere ganger?</strong><br>A: Ja, men hver anmeldelse teller som én stemme i snittet.</li>
                <li><strong>Q: Hvor kommer vitsene fra?</strong><br>A: Vitsene hentes fra <a href="https://official-joke-api.appspot.com/" target="_blank">Official Joke API</a>.</li>
                <li><strong>Q: Hva lagres?</strong><br>A: Kun vitsens ID, antall stjerner og eventuell kommentar lagres i databasen.</li>
                <li><strong>Q: Kan jeg se alle anmeldelser?</strong><br>A: Nei, kun gjennomsnittlig rating og antall anmeldelser vises.</li>
            </ul>
        </section>

        <section id="feilsoeking" class="mb-5">
            <h2>Feilsøking</h2>
            <ul>
                <li><strong>Problem:</strong> "Kunne ikke hente vits."<br><strong>Løsning:</strong> Sjekk nettverkstilkobling og at backend-API kjører.</li>
                <li><strong>Problem:</strong> "Noe gikk galt." ved innsending<br><strong>Løsning:</strong> Sjekk at du har valgt stjerner og at backend-API er tilgjengelig.</li>
                <li><strong>Problem:</strong> "Ingen anmeldelser ennå."<br><strong>Løsning:</strong> Ingen har anmeldt denne vitsen ennå – vær den første!</li>
            </ul>
        </section>

        <section id="verktøy-teknologi" class="mb-5">
            <h2>Brukte verktøy og teknologi</h2>
            <ul>
                <li><strong>Node.js/Express</strong> – Backend-rammeverk</li>
                <li><strong>MongoDB/Mongoose</strong> – Database og ODM</li>
                <li><strong>Nginx</strong> – Reverse proxy</li>
                <li><strong>PM2</strong> – Prosessmanager for Node.js</li>
                <li><strong>UFW</strong> – Brannmur</li>
                <li><strong>express-rate-limit</strong> – Rate limiting</li>
                <li><strong>dotenv</strong> – Miljøvariabler</li>
                <li><strong>Bootstrap 5</strong> – Frontend-rammeverk</li>
                <li><strong>Vanilla JavaScript</strong> – Frontend-logikk</li>
                <li><strong>HTML/CSS</strong> – Struktur og styling</li>
                <li><strong>official-joke-api.appspot.com</strong> – Ekstern API for vitser</li>
            </ul>
        </section>

        <section id="endringer" class="mb-5">
            <h2>Viktig endring: Ikke lenger bash-script eller GitHub Actions</h2>
            <div class="alert alert-warning">
                <strong>Merk:</strong> Fra og med juni 2025 brukes ikke lenger det automatiske bash-scriptet eller GitHub Actions CI/CD for oppsett og deploy. All installasjon og oppdatering må nå gjøres manuelt etter veiledningen i README og denne dokumentasjonen.
            </div>
        </section>

        <section id="databasesvakheter" class="mb-5">
            <h2>Databasesvakheter og forbedringer</h2>
            <p><strong>Svakheter i nåværende løsning:</strong></p>
            <ul>
                <li>Ingen brukerpålogging – samme person kan anmelde samme vits mange ganger.</li>
                <li>Ingen sjekk på om vitsen faktisk finnes i ekstern API før anmeldelse lagres.</li>
                <li>Kommentarer valideres kun på lengde, ikke innhold (f.eks. banning).</li>
                <li>Ingen indeks på <code>jokeId</code> – kan bli tregt ved mange anmeldelser.</li>
                <li>Man kan ikke hente ut alle anmeldelser for en vits (kun snitt og antall vises).</li>
                <li>Ingen mulighet for å trekke tilbake eller slette en anmeldelse.</li>
            </ul>
            <p><strong>Forslag til forbedringer:</strong></p>
            <ul>
                <li>Legg til brukersystem slik at én bruker kun kan anmelde hver vits én gang.</li>
                <li>Valider at vitsen finnes i ekstern API før anmeldelse lagres.</li>
                <li>Bedre validering av kommentarer (lengde, språk, evt. banning-filter).</li>
                <li>Legg til indeks på <code>jokeId</code> i databasen for raskere oppslag.</li>
                <li>Lag et endepunkt for å hente ut alle anmeldelser for en vits (for admin/læring).</li>
                <li>Implementer "soft delete" (f.eks. <code>deleted: true</code>) for å kunne trekke tilbake anmeldelser.</li>
            </ul>
            <p><em>Forklaring:</em> Dagens løsning er enkel og lett å forstå, men ikke robust mot juks eller misbruk. I en ekte applikasjon bør man sikre at dataene er riktige, at én bruker ikke kan stemme mange ganger, og at systemet tåler mange brukere uten å bli tregt. Indekser og autentisering er viktige verktøy for dette.</p>
        </section>

        <footer class="pt-3 mt-4 text-muted border-top">
            &copy; 2025 Joke Review
        </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
